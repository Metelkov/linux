Как настроить сеть с помощью инструмента «nmcli»

network manager command-line interface – интерфейс командной строки сетевого менеджера, сокращенно именуемый nmcli, представляет 
собой изящный и простой в использовании инструмент, который экономит много времени при настройке IP-адреса.

Для отображения всех активных сетевых интерфейсов в вашей системе Linux выполните команду:
$ nmcli connection show
или
$ nmcli con show

Кроме того, вы можете запустить команду, показанную ниже, чтобы отобразить как активные, так и неактивные интерфейсы.
$ nmcli dev status


Как установить статический IP-адрес с помощью инструмента nmcli (на enps03)

Но сначала давайте проверим IP-адрес с помощью команды IP.
$ ip addr
Текущий IP-адрес – 192.168.2.104 с CIDR /24.
Мы собираемся настроить статический IP со следующими значениями:
IP address:		 192.168.2.20/24
Default gateway:	 192.168.2.1
Preferred DNS:		  8.8.8.8
IP addressing 		  static


Сначала выполните команду, показанную ниже, чтобы настроить IP-адрес.
$ nmcli con mod enps03 ipv4.addresses 192.168.2.20/24

Затем настройте шлюз по умолчанию
$ nmcli con mod enps03 ipv4.gateway 192.168.2.1

Затем настройте DNS-сервер:
$ nmcli con mod enps03 ipv4.dns “8.8.8.8”

Затем измените адресацию с DHCP на статику
$ nmcli con mod enps03 ipv4.method manual

Чтобы сохранить изменения, запустите команду
$ nmcli con up enps03

Изменения будут записаны в файл /etc/network-scripts/ifcfg-enps03.

Для подтверждения IP еще раз запустите команду:
$ ip addr enps03

Кроме того, вы можете просмотреть файл /etc/network-scripts/ifcfg-enps03 с помощью команды cat.
$ cat /etc/network-scripts/ifcfg-enps03
